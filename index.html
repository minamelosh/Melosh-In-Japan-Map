<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Melosh in Japan Map!</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.42.2/mapbox-gl.css' rel='stylesheet' />
    <!-- <link rel="stylesheet" type="text/css" href="static/style.css"/> -->

    <link rel="stylesheet" type="text/css" href="static/style.css"/>
    <link rel="stylesheet" type="text/css" href="slick-1.8.0/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="slick-1.8.0/slick/slick-theme.css"/>

    <style>
            body { margin:0; padding:0; }
             #map { position:absolute; top:0; bottom:0; width:100%; }
            /*#map { position:absolute; top:0; bottom:0; height:700px; width: 85%; margin-top:100px; margin-left: 100px; margin-right: 100px; }*/
        </style>
</head>

<body>

    <style>
        .mapboxgl-popup {
            max-width: 400px;
            font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        }
    </style>
    <h1 style="text-align: center;">Melosh in Japan Map</h1>
    <div id='map'></div>
    <script>
    
    mapboxgl.accessToken = 'pk.eyJ1IjoibWluYW1lbG9zaCIsImEiOiJjajl5bmg5NGExNjVxMnhtZGtqemh0dXpxIn0.YjhWR-UHUFpZk0PB0Q_JAg';

    var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v9',
                center: [138.188,36.643],
                zoom: 5
            });

    map.on('load', function () {
        // Add a layer showing the places.
        map.addLayer({
                "id": "places",
                "type": "symbol",
                "source": {
                    "type": "geojson",
                    "data": {
                        "type": "FeatureCollection",
                        "features": [{
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Tokyo</strong><p><a href=\"https://www.japan-guide.com/e/e2164.html\" target=\"_blank\" title=\"Opens in a new window\">The Capital of Japan</a> is a huge prefecture made up of many cities, everything about it felt remarkable and grand, Tokyo station alone felt like a five story mall!</p><div class=pictures><div><img src=images/tokyo/tokyo.jpeg></img></div><div><img src=images/tokyo/tokyostation.jpg></img></div><div><img src=images/tokyo/xmas.jpeg></img></div></div>",
                                "icon": "rail"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [139.767052, 35.681167]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Monkey Park, Kyoto, Japan</strong><p>We went to the <a href=\"https://blog.gaijinpot.com/iwatayama-monkey-park//\" target=\"_blank\" title=\"Opens in a new window\">Monkey Park!</a> A small hike up to a beautiful view of Kyoto and an open space where snow monkeys roam free</p><div class=pictures><div><img src=images/monkeypark/babymonkey.jpeg ></img></div><div><img src=images/monkeypark/monkey.jpeg ></img></div><div><img src=images/monkeypark/monkeypark.jpeg ></img></div><div><img src=images/monkeypark/water.jpg></img></div><div><img src=images/monkeypark/up.jpeg ></img></div><div><img src=images/monkeypark/huts.jpg></img></div></div>",
                                "icon": "park"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [135.676687, 35.011335]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Fukishima</strong><p>This is the prefecture where my mom grew up, far on the country side with lots of land and beautiful nature walks. Her little town with a crazy long name <a href=\https://en.wikipedia.org/wiki/Yamatsuri,_Fukushima\" target=\"_blank\" title=\"Opens in a new window\">Yamatsuri-Machi, Higashishirakawa-Gun, Fukushima</a> is the perfect place to get away.</p><div class=pictures><div><img src=images/fukushima/momshouse.jpeg></img></div><div><img src=images/fukushima/fukushima.jpeg></img></div><div><img src=images/fukushima/secondcousin.jpeg></img></div></div>",
                                "icon": "garden"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [140.474728, 37.760834]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Shibuya, Tokyo, Japan</strong><p>The <a href=\"https://hubjapan.io/articles/10-best-things-to-do-in-shibuya-to-enjoy-its-nightlife\" target=\"_blank\" title=\"Opens in a new window\">night life</a> and shopping is crazy here! I grew up near San Fransico, but we got nothing on this city!</p><div class=pictures><div><img src=images/shibuya/crossing.jpeg></img></div><div><img src=images/shibuya/hall.jpeg></img></div><div><img src=images/shibuya/bikers.jpeg></img></div><div><img src=images/shibuya/shopping.jpeg></img></div></div>",
                                "icon": "shop"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [139.704051, 35.661777]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Shinjuku, Japan</strong><p>I was only here one night, to meet my highschool friend at <a href=\https://www.roughguides.com/article/tokyos-tiniest-drinking-dens-a-guide-to-golden-gai/\" target=\"_blank\" title=\"Opens in a new window\">Golden Gai</a>, a super cool place that I highly reccomend! It is filled with tiny bars that each have a maximum capacity of about 10 people, so you have an intimate experience with the other guests and the bar tender.</p><div class=pictures><div><img src=images/shinjuku/goldengai.jpeg></img></div><div><img src=images/shinjuku/bar.jpeg></img></div><div><img src=images/shinjuku/shinjuku.jpeg></img></div><div><img src=images/shinjuku/minaandyoni.jpeg></img></div><div><img src=images/shinjuku/yoni.jpeg></img></div><div><img src=images/shinjuku/station.jpeg></img></div></div>",
                                "icon": "alcohol-shop"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [139.703549, 35.693840]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Yamatsuri Machi Fukushima</strong><p>We had our family reunion here at this <a href=\"https://www.jalan.net/en/japan_hotels_ryokan/Ryokan/Fukushima_Ryokan/Shirakawa_Ryokan/Tanagura_HigashiShirakawa_Ryokan/yuparu_yamatsuri/\" target=\"_blank\" title=\"Opens in a new window\">Japanese Bath House and Hotel.</a> The saunas were amazingly relaxing and they supplied matching kimonos for all guests to wear.  Our whole family got served an amzing dinner in their party room where the toodlers could be as loud as they wanted.</p><div class=pictures><div><img src=images/family/family.jpeg></img></div><div><img src=images/family/matchingsiblings.jpeg></img></div><div><img src=images/family/meandgma.jpeg></img></div><div><img src=images/family/familydinner.jpg></img></div><div><img src=images/family/cousins.jpeg></img></div><div><img src=images/family/yumifamily.jpeg></img></div><div><img src=images/family/midorikawa.jpg></img></div></div>",
                                "icon": "star"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [140.424783, 36.871403]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Sky Tree</strong><p><a href=\"http://www.tokyo-skytree.jp/en/\" target=\"_blank\" title=\"Opens in a new window\">Sky Tree</a> has amazing views and tons of shopping and eating options!</p><div class=pictures><div><img src=images/skytree/skytree.jpeg></img></div><div><img src=images/skytree/treeview.jpeg></img></div><div><img src=images/skytree/entrance.jpeg></img></div><div><img src=images/skytree/bread.jpeg></img></div><div><img src=images/skytree/okinomiyaki.jpeg></img></div><div><img src=images/skytree/nhk.jpeg></img></div><div><img src=images/skytree/cat.jpeg></img></div></div>",
                                "icon": "monument"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [139.810700, 35.710063]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Kyoto</strong><p>The Arlington Players' production of Stephen Sondheim's  <a href=\"http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show\" target=\"_blank\" title=\"Opens in a new window\"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p><div class=pictures><div><img src=images/kyoto/kyoto.jpeg></img></div><div><img src=images/kyoto/kimonogarden.jpg></img></div><div><img src=images/kyoto/shops.jpeg></img></div><div><img src=images/kyoto/city.jpg></img></div><div><img src=images/kyoto/chicken.jpg></img></div></div>",
                                "icon": "restaurant"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [135.768029, 35.011636]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Shanghai, China</strong><p> Our connecting flight form Shanghai to San Fransico got canceled and we recieved a new flight time 20 hours later - so we got to spend an unplaned day in China!</p><div class=pictures><div><div class=pictures><div><img src=images/china/line.jpeg></img></div><div><img src=images/china/hotel.jpg></img></div><div><img src=images/china/tea.jpeg></img></div><div><img src=images/china/simcity.jpeg></img></div></div>",
                                "icon": "airport"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [121.473702, 31.230390]
                            }
                        }, {
                            "type": "Feature",
                            "properties": {
                                "description": "<strong>Shinkansen</strong><p>We took Japan's amazing <a href=\"https://www.japan-guide.com/e/e2018.html\" target=\"_blank\">Shinkansen</a>, or high speed bullet train, from tokyo to kyoto, taking us 283 miles in just 2hrs and 20 min!</p><div class=pictures><div><img src=images/shinkansen/shinkansen.jpeg></img></div><div><img src=images/shinkansen/houses.jpeg></img></div><div><img src=images/shinkansen/rice.jpeg></img></div><div><img src=images/shinkansen/grass.jpeg></img></div><div><img src=images/shinkansen/view.jpeg></img></div></div>",
                                "icon": "rail"
                            },
                            "geometry": {
                                "type": "Point",
                                "coordinates": [138.863493, 35.095584]
                            }
                        }]
                    }
                },
                "layout": {
                    "icon-image": "{icon}-15",
                    "icon-allow-overlap": true
                }
            });

//try add icon
            // images/title.jpg
    // map.loadImage('https://github.com/minamelosh/thrifty-shopping/blob/gh-pages/images/title.jpg', function(error, image) {
    //     if (error) throw error;
    //     map.addImage('images/title.jpg', image);
    //     map.addLayer({
    //         "id": "points",
    //         "type": "symbol",
    //         "source": {
    //             "type": "geojson",
    //             "data": {
    //                 "type": "FeatureCollection",
    //                 "features": [{
    //                     "type": "Feature",
    //                     "geometry": {
    //                         "type": "Point",
    //                         "coordinates": [138.282445, 41.378366]
    //                     }
    //                 }]
    //             }
    //         },
    //         "layout": {
    //             "icon-image": "images/title.jpg",
    //             "icon-size": 0.25
    //         }
    //     });
    // });

    //try custom marker
// // });
//         var geojson = {
//             "type": "FeatureCollection",
//             "features": [
//                 {
//                     "type": "Feature",
//                     "properties": {
//                         "message": "Foo",
//                         "iconSize": [60, 60]
//                     },
//                     "geometry": {
//                         "type": "Point",
//                         "coordinates": [
//                             138.282445,
//                             41.378366
//                         ]
//                     }
//                 }
//             ]
//         };

//         geojson.features.forEach(function(marker) {
//             // create a DOM element for the marker
//             var el = document.createElement('div');
//             el.className = 'marker';
//             el.style.backgroundImage = 'url(https://github.com/minamelosh/thrifty-shopping/blob/gh-pages/images/title.jpg';
//             el.style.width = marker.properties.iconSize[0] + 'px';
//             el.style.height = marker.properties.iconSize[1] + 'px';

//             el.addEventListener('click', function() {
//                 window.alert(marker.properties.message);
//             });

//             // add marker to map
//             new mapboxgl.Marker(el)
//                 .setLngLat(marker.geometry.coordinates)
//                 .addTo(map);
//         });

        // When a click event occurs on a feature in the places layer, open a popup at the
        // location of the feature, with description HTML from its properties.
        map.on('click', 'places', function (e) {
            new mapboxgl.Popup()
                .setLngLat(e.features[0].geometry.coordinates)
                .setHTML(e.features[0].properties.description)
                .addTo(map);


            $('.pictures').slick();

        });

        // Change the cursor to a pointer when the mouse is over the places layer.
        map.on('mouseenter', 'places', function () {
            map.getCanvas().style.cursor = 'pointer';
        });

        // Change it back to a pointer when it leaves.
        map.on('mouseleave', 'places', function () {
            map.getCanvas().style.cursor = '';
        });
    });

    </script>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.2.1/jquery-migrate.js"></script>
    <script type="text/javascript" src="slick-1.8.0/slick/slick.min.js"></script>

    </body>
</html>